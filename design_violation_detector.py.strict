#!/usr/bin/env python3
"""
Selective Design Violation Detector
é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯
"""
import os
import sys

def main():
    print("ğŸ›¡ï¸ è¨­è¨ˆæ€æƒ³é•åæ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œä¸­...")
    
    # é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯
    important_files = [
        'main.py',
        'email_notifier.py', 
        'lvyuan_collector.py',
        'settings_manager.py'
    ]
    
    violations = []
    for file_path in important_files:
        if os.path.exists(file_path):
            try:
                with open(file_path, 'r', encoding='utf-8') as f:
                    content = f.read()
                compile(content, file_path, 'exec')
            except SyntaxError as e:
                violations.append(f"{file_path}: {e}")
            except:
                pass  # ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–
    
    if violations:
        print("ğŸš¨ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼:")
        for v in violations:
            print(f"  {v}")
        sys.exit(1)
    else:
        print("âœ… é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼å®Œäº† - é•åãªã—")
        sys.exit(0)

if __name__ == "__main__":
    main()
