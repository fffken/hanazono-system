# 一時診断スクリプト手法 - 標準作業プロトコル v1.0

*制定日*: 2025年6月8日  
*制定理由*: HANAZONOシステム復旧における歴史的成功により、Geminiの「OS再インストール必要」誤診を完全論破  
*適用対象*: 今後の全システム診断・修復・開発作業

---

## 🏆 制定背景

### 歴史的成果
- **Gemini2.5pro**: 「OS再インストール必要」と誤診
- **一時スクリプト手法**: HCQASプロセス除去により完全復旧達成
- **成功率**: システム復旧100%、OS再インストール回避

### 証明された優位性
1. **非破壊性**: 既存システムを汚染しない
2. **段階性**: 問題を確実に切り分け
3. **明確性**: 各スクリプトの目的が単一で明確
4. **再現性**: 同じスクリプトで誰でも同じ結果
5. **効率性**: コピペ基本でヒューマンエラー排除

---

## 📋 標準プロトコル

### 基本原則
**「使い捨てのメスによる、クリーンな外科手術」**

### 5ステップ実行プロトコル

#### ステップ1: 目的定義とスクリプト作成
```bash
# 目的を明確に定義
nano [目的]_[日時].py
```
**ルール**:
- スクリプト名は目的と日時を含む
- 単一目的に特化（複数機能の混在禁止）
- 実行後削除が前提

#### ステップ2: コード記述
**必須要素**:
```python
#!/usr/bin/env python3
"""
[スクリプト名]
目的: [明確な目的記述]
作成: 一時使用目的（完了後削除）
"""

def print_section(title):
    print(f"\n{'='*60}")
    print(f" {title}")
    print(f"{'='*60}")

def main():
    print(f"🎯 {スクリプト目的}")
    print(f"Time: {datetime.now()}")
    
    # 段階的処理
    print_section("Phase 1: [処理名]")
    # 処理実装
    
    print_section("結果判定")
    # 明確な成功/失敗判定

if __name__ == "__main__":
    main()
```

#### ステップ3: スクリプト実行
```bash
python3 [スクリプト名].py
```
**ルール**:
- 実行前に目的確認必須
- 全出力を保存・分析
- 失敗時は原因特定後次スクリプト作成

#### ステップ4: 結果分析と判断
**判定基準**:
- ✅ 成功: 次段階スクリプト作成
- ❌ 失敗: 原因分析スクリプト作成
- ⚠️ 部分成功: 補完スクリプト作成

#### ステップ5: スクリプト破棄
```bash
rm [スクリプト名].py
```
**ルール**:
- 作業完了後は必ず削除
- プロジェクト汚染防止徹底
- 必要時は内容をドキュメント化

---

## 🛠️ 作業方式統合ルール

### コピペ基本原則との統合
```bash
# スクリプト作成
nano diagnostic_script.py

# 一括コピペ実行
python3 diagnostic_script.py

# 即座削除
rm diagnostic_script.py
```

### 35行制限対応
- **短いスクリプト**: 一括コピペ
- **長いスクリプト**: 機能分割して複数スクリプト作成

### エラー時対応
```python
# 必須エラーハンドリング
try:
    # 処理
    print("✅ 成功")
except Exception as e:
    print(f"❌ 失敗: {e}")
    print("🔍 次の診断スクリプトで原因特定")
```

---

## 📊 スクリプト分類標準

### 診断系スクリプト
- `health_check_[対象]_[日時].py`
- `process_diagnosis_[日時].py`
- `package_verification_[日時].py`

### 修復系スクリプト
- `cleanup_[対象]_[日時].py`
- `restoration_[機能]_[日時].py`
- `package_reinstall_[日時].py`

### 検証系スクリプト
- `verification_[機能]_[日時].py`
- `test_[対象]_[日時].py`
- `final_check_[日時].py`

---

## 🎯 適用対象

### 必須適用ケース
1. **システム診断**: 健全性確認全般
2. **問題修復**: エラー・障害対応
3. **パッケージ管理**: インストール・アップデート
4. **設定変更**: 重要ファイル修正
5. **環境構築**: 新機能追加

### 適用除外ケース
- 単純なファイル表示（`cat`, `ls`等）
- 設定値の単純確認
- 1行コマンドで完結する作業

---

## 🔒 安全性保証

### 必須安全措置
1. **バックアップ**: 重要ファイルの事前保護
2. **読み取り専用**: 診断は非破壊的に実行
3. **段階実行**: 一度に多くを変更しない
4. **復旧可能性**: 常に前状態への復帰手段確保

### 禁止事項
- 複数目的の混在スクリプト
- 永続化を前提としたスクリプト
- バックアップなしの破壊的操作
- エラーハンドリング省略

---

## 📈 効果測定指標

### 成功指標
- **問題解決率**: 95%以上
- **OS再インストール回避率**: 90%以上  
- **作業時間短縮**: 従来比50%削減
- **ヒューマンエラー**: ゼロ維持

### 品質指標
- **再現性**: 同じスクリプトで同じ結果
- **明確性**: 目的と結果が一目瞭然
- **安全性**: システム破損ゼロ
- **効率性**: コピペ基本で迅速実行

---

## 🚀 今後の発展計画

### Phase 1: 基本確立（完了）
- ✅ HANAZONOシステムでの実証
- ✅ 基本プロトコル策定
- ✅ Gemini誤診の論破

### Phase 2: 標準化推進
- スクリプトテンプレート整備
- 典型的パターン集作成
- AI学習データ蓄積

### Phase 3: 高度化
- 自動判定機能追加
- エラーパターン学習
- 予防的診断スクリプト

---

## 💡 kiokuシステム統合

### 記憶項目
1. **成功パターン**: 効果的だったスクリプト例
2. **失敗パターン**: 避けるべき実装方法
3. **最適化**: より効率的な手法の発見
4. **進化**: 新しい問題への対応手法

### 継承ルール
- 新AIセッション開始時に本プロトコル必読
- 成功事例の積極的活用
- 改良案の継続的提案
- 標準の定期見直し

---

**🏆 この手法により、HANAZONOシステムはGeminiの「不可能」を「可能」に変えました。**  
**今後、全ての複雑なシステム問題に対する標準武器として活用します。**
